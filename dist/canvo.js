!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).Editor=i()}(this,function(){"use strict";return function(){function t(t){this.isDrawing=!1,t.renderDiv instanceof HTMLElement?this.div=t.renderDiv:this.div=document.getElementById(t.renderDiv),this.canvas=document.createElement("canvas"),this.c=this.canvas.getContext("2d"),this.canvas.style.width="100%",this.canvas.style.height="auto",this.div.height=window.innerHeight,this.div.width=window.innerWidth,this.c.lineJoin="round",this.c.lineCap="round",this.c.lineWidth=t.defaults.width||7,this.c.strokeStyle=t.defaults.color||"#000000",this.initEvents(),this.div.appendChild(this.canvas)}return t.prototype.initEvents=function(){var t=this;this.canvas.addEventListener("mousedown",function(i){var e;t.isDrawing=!0,e=[i.offsetX,i.offsetY],t.lastX=e[0],t.lastY=e[1]}),this.canvas.addEventListener("mousemove",this.draw.bind(this)),this.canvas.addEventListener("mouseup",function(){return t.isDrawing=!1}),this.canvas.addEventListener("mouseout",function(){return t.isDrawing=!1}),window.addEventListener("resize",function(){t.div.height=window.innerHeight,t.div.width=window.innerWidth})},t.prototype.setColor=function(t){this.c.strokeStyle=t},t.prototype.setLineWidth=function(t){this.c.lineWidth=t},t.prototype.loadImageFromDataUri=function(t){var i=this,e=new Image;e.onload=function(){var t=e.width/2,n=e.height/2,s=i.canvas.width/2,o=i.canvas.height/2;i.c.drawImage(e,s-t,o-n)},e.src=t},t.prototype.toDataUri=function(){return this.canvas.toDataURL()},t.prototype.draw=function(t){var i;this.isDrawing&&(this.c.beginPath(),this.c.moveTo(this.lastX,this.lastY),this.c.lineTo(t.offsetX,t.offsetY),this.c.stroke(),i=[t.offsetX,t.offsetY],this.lastX=i[0],this.lastY=i[1])},t}()});
