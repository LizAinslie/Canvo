"use strict";var Editor=function(){function t(t){this.isDrawing=!1,this.canvas=document.getElementById(t.canvasId),this.c=this.canvas.getContext("2d"),this.canvas.style.width=t.defaults.width?t.defaults.width+"px":"100%",this.canvas.style.height=t.defaults.height?t.defaults.height+"px":"100%",this.canvas.height=t.defaults.height||this.canvas.clientHeight,this.canvas.width=t.defaults.width||this.canvas.clientWidth,this.defaultLineWidth=t.defaults.lineWidth||7,this.defaultColor=t.defaults.color||"#000000",this.draw=this.draw.bind(this),this.initEvents=this.initEvents.bind(this),this.toDataUri=this.toDataUri.bind(this),this.setColor=this.setColor.bind(this),this.setLineWidth=this.setLineWidth.bind(this),this.setDefaults=this.setDefaults.bind(this),this.stopDrawing=this.stopDrawing.bind(this),this.initEvents(),this.setDefaults()}return t.prototype.initEvents=function(){var t=this;this.canvas.addEventListener("mousedown",function(i){var s;0==i.button&&(t.isDrawing=!0,s=[i.offsetX,i.offsetY],t.lastX=s[0],t.lastY=s[1])}),this.canvas.addEventListener("mousemove",this.draw),this.canvas.addEventListener("mouseup",function(){return t.stopDrawing}),this.canvas.addEventListener("mouseout",this.stopDrawing)},t.prototype.stopDrawing=function(t){0==t.button&&(this.isDrawing=!1)},t.prototype.setColor=function(t){this.c.strokeStyle=t},t.prototype.setLineWidth=function(t){this.c.lineWidth=t},t.prototype.loadBackgroundImageFromDataUri=function(t){var i=this,s=new Image;s.onload=function(){i.canvas.style.width=s.width+"px",i.canvas.style.height=s.height+"px",i.canvas.width=s.width,i.canvas.height=s.height,i.setDefaults(),i.c.drawImage(s,0,0)},s.src=t},t.prototype.loadImageFromDataUri=function(t,i){var s=this;void 0===i&&(i={x:0,y:0});var e=new Image;e.onload=function(){s.c.drawImage(e,i.x,i.y)},e.src=t},t.prototype.toDataUri=function(){return this.canvas.toDataURL("image/png").replace("image/png","image/octet-stream")},t.prototype.draw=function(t){var i;this.isDrawing&&(this.c.beginPath(),this.c.moveTo(this.lastX,this.lastY),this.c.lineTo(t.offsetX,t.offsetY),this.c.stroke(),i=[t.offsetX,t.offsetY],this.lastX=i[0],this.lastY=i[1])},t.prototype.setDefaults=function(){this.c.lineJoin="round",this.c.lineCap="round",this.c.lineWidth=this.defaultLineWidth||8,this.c.strokeStyle=this.defaultColor||"#000000"},t}();module.exports=Editor;
